2025/10/30 17:19:52 âœ… Connected to Supabase PostgreSQL (simple protocol enabled)!

2025/10/30 17:19:53 [32m/Users/aditisaxena/mental-health-be/config/database.go:37 [33mSLOW SQL >= 200ms
[0m[31;1m[1576.750ms] [33m[rows:0][35m CREATE EXTENSION IF NOT EXISTS "uuid-ossp";[0m

2025/10/30 17:19:56 [32m/Users/aditisaxena/mental-health-be/config/database.go:40 [33mSLOW SQL >= 200ms
[0m[31;1m[3076.167ms] [33m[rows:0][35m CREATE EXTENSION IF NOT EXISTS "pgcrypto";[0m
2025/10/30 17:19:56 âœ… Connected to PostgreSQL!

2025/10/30 17:19:59 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:8 [33mSLOW SQL >= 200ms
[0m[31;1m[3095.397ms] [33m[rows:0][35m 
		DO $$ BEGIN 
			-- User roles
			IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'user_role') THEN 
				CREATE TYPE user_role AS ENUM ('student', 'admin', 'chief_admin', 'counselor'); 
			END IF;

			-- Complaint types
			IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'complaint_type') THEN 
				CREATE TYPE complaint_type AS ENUM (
					'roommate', 
					'plumbing', 
					'cleanliness', 
					'electricity', 
					'Lost and Found', 
					'Other Issues'
				); 
			END IF;

			-- Complaint statuses
			IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'status_type') THEN 
				CREATE TYPE status_type AS ENUM (
					'open', 
					'inprogress', 
					'resolved'
				); 
			END IF;
			-- Apology types
			IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'apology_type') THEN 
				CREATE TYPE apology_type AS ENUM (
					'outing',
					'misconduct',
					'miscellaneous'
				);
			END IF;

			-- Apology statuses
			IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'apology_status') THEN 
				CREATE TYPE apology_status AS ENUM (
					'submitted', 
					'reviewed', 
					'accepted', 
					'rejected'
				);
			END IF;
		END $$;
	[0m

2025/10/30 17:20:02 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:57 [33mSLOW SQL >= 200ms
[0m[31;1m[2671.075ms] [33m[rows:0][35m ALTER TYPE complaint_type ADD VALUE IF NOT EXISTS 'electricity';[0m

2025/10/30 17:20:13 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:58 [33mSLOW SQL >= 200ms
[0m[31;1m[11441.811ms] [33m[rows:0][35m ALTER TYPE complaint_type ADD VALUE IF NOT EXISTS 'Lost and Found';[0m

2025/10/30 17:20:14 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:59 [33mSLOW SQL >= 200ms
[0m[31;1m[819.571ms] [33m[rows:0][35m ALTER TYPE complaint_type ADD VALUE IF NOT EXISTS 'Other Issues';[0m

2025/10/30 17:20:15 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:62 [33mSLOW SQL >= 200ms
[0m[31;1m[613.633ms] [33m[rows:0][35m ALTER TYPE user_role ADD VALUE IF NOT EXISTS 'chief_admin';[0m

2025/10/30 17:20:15 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[441.127ms] [33m[rows:1][35m SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND table_type = 'BASE TABLE'[0m

2025/10/30 17:20:16 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[314.273ms] [33m[rows:1][35m SELECT CURRENT_DATABASE()[0m

2025/10/30 17:20:18 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[2470.274ms] [33m[rows:-][35m SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'neondb' AND table_schema = CURRENT_SCHEMA() AND table_name = 'users'[0m

2025/10/30 17:20:20 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[1209.595ms] [33m[rows:-][35m SELECT * FROM "users" LIMIT 5[0m

2025/10/30 17:20:21 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[1452.891ms] [33m[rows:-][35m SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'neondb' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'users' AND constraint_type = 'UNIQUE'[0m

2025/10/30 17:20:24 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[2327.795ms] [33m[rows:-][35m SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'neondb' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'users'[0m

2025/10/30 17:20:27 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[3479.517ms] [33m[rows:-][35m SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type
		FROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())
		WHERE a.attnum > 0 -- hide internal columns
		AND NOT a.attisdropped -- hide deleted columns
		AND b.relname = 'users'[0m

2025/10/30 17:20:30 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[2613.128ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:34 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[4205.399ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'name') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:41 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[6856.210ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'email') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:43 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[2218.068ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'password') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:52 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[8905.903ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'role') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:53 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[944.583ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'block') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:53 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[299.317ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:54 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[566.557ms] [33m[rows:1][35m SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'student_models' AND table_type = 'BASE TABLE'[0m

2025/10/30 17:20:54 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[519.549ms] [33m[rows:1][35m SELECT CURRENT_DATABASE()[0m

2025/10/30 17:20:55 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[324.344ms] [33m[rows:-][35m SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'neondb' AND table_schema = CURRENT_SCHEMA() AND table_name = 'student_models'[0m

2025/10/30 17:20:55 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[354.636ms] [33m[rows:-][35m SELECT * FROM "student_models" LIMIT 5[0m

2025/10/30 17:20:55 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[370.092ms] [33m[rows:-][35m SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'neondb' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'student_models' AND constraint_type = 'UNIQUE'[0m

2025/10/30 17:20:56 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[314.129ms] [33m[rows:-][35m SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'neondb' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'student_models'[0m

2025/10/30 17:20:56 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[350.654ms] [33m[rows:-][35m SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type
		FROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())
		WHERE a.attnum > 0 -- hide internal columns
		AND NOT a.attisdropped -- hide deleted columns
		AND b.relname = 'student_models'[0m

2025/10/30 17:20:56 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:65 [33mSLOW SQL >= 200ms
[0m[31;1m[318.127ms] [33m[rows:0][35m SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'student_models' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'student_models' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))[0m

2025/10/30 17:20:57 [31;1m [35;1mERROR: constraint "uni_student_models_user_id" of relation "student_models" does not exist (SQLSTATE 42704)
[0m[33m[299.681ms] [34;1m[rows:0][0m ALTER TABLE "student_models" DROP CONSTRAINT "uni_student_models_user_id"

2025/10/30 17:20:57 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:78 [33mSLOW SQL >= 200ms
[0m[31;1m[461.800ms] [33m[rows:0][35m 
		ALTER TABLE complaints 
		ALTER COLUMN type TYPE complaint_type USING type::complaint_type,
		ALTER COLUMN status TYPE status_type USING status::status_type;
	[0m

2025/10/30 17:20:57 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:85 [33mSLOW SQL >= 200ms
[0m[31;1m[372.010ms] [33m[rows:0][35m DO $$ BEGIN
		IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='complaints' AND column_name='student_identifier') THEN
			ALTER TABLE complaints ADD COLUMN student_identifier text;
		END IF;
		IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='apologies' AND column_name='student_identifier') THEN
			ALTER TABLE apologies ADD COLUMN student_identifier text;
		END IF;
		-- Add priority column for complaints (text with default 'medium')
		IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='complaints' AND column_name='priority') THEN
			ALTER TABLE complaints ADD COLUMN priority text DEFAULT 'medium';
		END IF;
	END $$;[0m

2025/10/30 17:20:58 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:99 [33mSLOW SQL >= 200ms
[0m[31;1m[350.990ms] [33m[rows:0][35m DO $$ BEGIN
		IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='student_models' AND column_name='student_identifier') THEN
			ALTER TABLE student_models ADD COLUMN student_identifier text;
		END IF;
		-- Create unique index on student_identifier if not exists
		IF NOT EXISTS (SELECT 1 FROM pg_indexes WHERE tablename='student_models' AND indexname='idx_student_models_student_identifier_unique') THEN
			BEGIN
				-- Try to create unique index; if duplicate values exist this will fail and we'll leave the index absent
				EXECUTE 'CREATE UNIQUE INDEX CONCURRENTLY idx_student_models_student_identifier_unique ON student_models (student_identifier)';
			EXCEPTION WHEN others THEN
				-- ignore index creation errors (duplicates, locks)
				NULL;
			END;
		END IF;
	END $$;[0m

2025/10/30 17:20:58 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:116 [33mSLOW SQL >= 200ms
[0m[31;1m[355.899ms] [33m[rows:0][35m DO $$ BEGIN
		IF NOT EXISTS (SELECT 1 FROM pg_tables WHERE schemaname = CURRENT_SCHEMA() AND tablename = 'password_reset_tokens') THEN
			CREATE TABLE password_reset_tokens (
				id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
				user_id uuid NOT NULL REFERENCES users(id) ON DELETE CASCADE,
				token text NOT NULL UNIQUE,
				expires_at timestamptz,
				created_at timestamptz DEFAULT now()
			);
		END IF;
	END $$;[0m

2025/10/30 17:20:58 [32m/Users/aditisaxena/mental-health-be/models/migrate.go:129 [33mSLOW SQL >= 200ms
[0m[31;1m[385.837ms] [33m[rows:0][35m DO $$ BEGIN
		-- If notifications table doesn't exist, create with the new schema
		IF NOT EXISTS (SELECT 1 FROM pg_tables WHERE schemaname = CURRENT_SCHEMA() AND tablename = 'notifications') THEN
			CREATE TABLE notifications (
				id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
				user_id uuid NOT NULL REFERENCES users(id) ON DELETE CASCADE,
				title text NOT NULL,
				message text NOT NULL,
				type text DEFAULT 'info',
				related_id uuid,
				related_type text,
				is_read boolean DEFAULT false,
				created_at timestamptz DEFAULT now(),
				updated_at timestamptz DEFAULT now()
			);
		ELSE
			-- Table exists: ensure new columns exist and migrate legacy columns
			-- Add user_id if missing and copy from admin_id when present
			IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='user_id') THEN
				ALTER TABLE notifications ADD COLUMN user_id uuid;
				IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='admin_id') THEN
					UPDATE notifications SET user_id = admin_id WHERE user_id IS NULL;
				END IF;
			END IF;

			-- Add message column and copy from body if body exists
			IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='message') THEN
				ALTER TABLE notifications ADD COLUMN message text;
				IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='body') THEN
					UPDATE notifications SET message = body WHERE message IS NULL;
				END IF;
			END IF;

			-- Add type, related_id, related_type, updated_at if missing
			IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='type') THEN
				ALTER TABLE notifications ADD COLUMN type text DEFAULT 'info';
			END IF;
			IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='related_id') THEN
				ALTER TABLE notifications ADD COLUMN related_id uuid;
			END IF;
			IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='related_type') THEN
				ALTER TABLE notifications ADD COLUMN related_type text;
			END IF;
			IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='notifications' AND column_name='updated_at') THEN
				ALTER TABLE notifications ADD COLUMN updated_at timestamptz DEFAULT now();
			END IF;
		END IF;
	END $$;[0m

2025/10/30 17:20:59 [32m/Users/aditisaxena/mental-health-be/models/seed.go:14 [33mSLOW SQL >= 200ms
[0m[31;1m[371.368ms] [33m[rows:1][35m SELECT count(*) FROM "users"[0m
2025/10/30 17:20:59 ðŸŒ± Seed skipped (users already exist)
2025/10/30 17:20:59 ðŸ“¦ Database migrations completed successfully!
2025/10/30 17:20:59 ðŸš€ Server running at http://localhost:8080

 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
 â”‚                   Fiber v2.52.6                   â”‚ 
 â”‚               http://127.0.0.1:8080               â”‚ 
 â”‚       (bound on host 0.0.0.0 and port 8080)       â”‚ 
 â”‚                                                   â”‚ 
 â”‚ Handlers ............ 57  Processes ........... 1 â”‚ 
 â”‚ Prefork ....... Disabled  PID ............. 51277 â”‚ 
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 


2025/10/30 17:21:08 [32m/Users/aditisaxena/mental-health-be/controllers/auth.go:114 [33mSLOW SQL >= 200ms
[0m[31;1m[680.785ms] [33m[rows:1][35m SELECT * FROM "users" WHERE email = 'warden_1761824491@hostel.com' ORDER BY "users"."id" LIMIT 1[0m

2025/10/30 17:21:10 [32m/Users/aditisaxena/mental-health-be/middlewares/auth.go:54 [33mSLOW SQL >= 200ms
[0m[31;1m[754.440ms] [33m[rows:1][35m SELECT * FROM "users" WHERE id = '83d0439e-3228-4838-a0ea-e91b4b874319' ORDER BY "users"."id" LIMIT 1[0m

2025/10/30 17:21:10 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:464 [33mSLOW SQL >= 200ms
[0m[31;1m[486.483ms] [33m[rows:1][35m SELECT * FROM "users" WHERE id = '83d0439e-3228-4838-a0ea-e91b4b874319' ORDER BY "users"."id" LIMIT 1[0m

2025/10/30 17:21:12 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:472 [33mSLOW SQL >= 200ms
[0m[31;1m[317.682ms] [33m[rows:1][35m SELECT * FROM "attachments" WHERE "attachments"."complaint_id" IN ('e7a657aa-a97b-450d-a1eb-f0ce3e80a36a','fbef4b4a-81ec-49eb-ac16-b8d5f2013e0e','fc6fe761-5ef7-40a0-97a5-aa31b2b536dc','ddabc2a4-c2ad-408e-bd74-11da160e920a','ff698d18-a970-4640-bd11-78e9da3f6009','6e388dd3-d611-4c96-8952-3b82adce96b4','2efebd67-e586-4ab0-a82f-87bb543f9b21','01667b37-4294-48ac-94f9-a963728f7b96','90d72406-b247-4341-a55a-586116936c1d','c1c54f6b-9d00-47d0-baaf-acc34905c853','c5f72d8d-6241-4913-a50b-b2152862d860','7be73891-c957-40b4-afcb-e540bb012ab7','4e3cc0a1-b9df-4cbc-9f82-e95f29126085','adfc2283-ceee-4bac-9907-d9271eb62be9','0ac4df0b-4193-4ef3-a1aa-91720a22ba67','d92ddf59-979a-4dd9-afd5-d13bcb1107f6','b82ba8de-ecd3-46e5-8ea6-29a858ef3f82','bd01d146-796b-47ec-a9e0-48c39103e7d6','db8999c4-72b6-475a-af7e-5b37c3981621','b90bed6c-cb1d-47a0-9c5d-2eea403a1c1f','1123251c-0408-416d-8e0b-28b0d123fbeb')[0m

2025/10/30 17:21:12 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:472 [33mSLOW SQL >= 200ms
[0m[31;1m[715.223ms] [33m[rows:18][35m SELECT * FROM "student_models" WHERE "student_models"."user_id" IN ('270a1e6e-e898-4b2e-93b0-5e39d3f5a46f','bb1ead0c-cd1d-4e60-80a0-d06c1705bedc','95a17d98-2a05-4995-8ecc-677777799382','eb0b4b69-fe27-4950-a64b-331989cbafb0','24b4d85b-a0e3-4bb1-918f-b0744207a21d','0491f5f5-6d08-4a3f-8b6b-ed25b8af8da5','7154b2f7-a9c1-4c41-a3f1-eef79034cbbf','0563622e-1d35-46e9-ba3d-c23d018a357c','6b066bef-a2eb-40ba-9a86-97d08e76b079','de69f941-8906-42e9-8fea-4b3cc3edce94','90bf8dde-1c45-4ae2-badc-c78aeec0d5ca','119bb871-6d5c-4b6f-b4a9-eca90409a079','28994536-4f32-4221-aa6c-653b401934ea','2a4b511d-fac2-4249-a359-3a753b02c453','08d10d2a-4dfa-4819-a716-4d64422a62a6','ed85ba7c-72fb-42a4-af23-67022f2d5bab','ddb593c3-fe1e-4d2b-86bb-10c5315f46d2','895e13f2-064c-425d-afdd-8928887543de')[0m

2025/10/30 17:21:13 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:472 [33mSLOW SQL >= 200ms
[0m[31;1m[401.781ms] [33m[rows:2][35m SELECT * FROM "timeline_entries" WHERE "timeline_entries"."complaint_id" IN ('e7a657aa-a97b-450d-a1eb-f0ce3e80a36a','fbef4b4a-81ec-49eb-ac16-b8d5f2013e0e','fc6fe761-5ef7-40a0-97a5-aa31b2b536dc','ddabc2a4-c2ad-408e-bd74-11da160e920a','ff698d18-a970-4640-bd11-78e9da3f6009','6e388dd3-d611-4c96-8952-3b82adce96b4','2efebd67-e586-4ab0-a82f-87bb543f9b21','01667b37-4294-48ac-94f9-a963728f7b96','90d72406-b247-4341-a55a-586116936c1d','c1c54f6b-9d00-47d0-baaf-acc34905c853','c5f72d8d-6241-4913-a50b-b2152862d860','7be73891-c957-40b4-afcb-e540bb012ab7','4e3cc0a1-b9df-4cbc-9f82-e95f29126085','adfc2283-ceee-4bac-9907-d9271eb62be9','0ac4df0b-4193-4ef3-a1aa-91720a22ba67','d92ddf59-979a-4dd9-afd5-d13bcb1107f6','b82ba8de-ecd3-46e5-8ea6-29a858ef3f82','bd01d146-796b-47ec-a9e0-48c39103e7d6','db8999c4-72b6-475a-af7e-5b37c3981621','b90bed6c-cb1d-47a0-9c5d-2eea403a1c1f','1123251c-0408-416d-8e0b-28b0d123fbeb')[0m

2025/10/30 17:21:13 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:472 [33mSLOW SQL >= 200ms
[0m[31;1m[726.363ms] [33m[rows:18][35m SELECT * FROM "users" WHERE "users"."id" IN ('270a1e6e-e898-4b2e-93b0-5e39d3f5a46f','bb1ead0c-cd1d-4e60-80a0-d06c1705bedc','95a17d98-2a05-4995-8ecc-677777799382','eb0b4b69-fe27-4950-a64b-331989cbafb0','24b4d85b-a0e3-4bb1-918f-b0744207a21d','0491f5f5-6d08-4a3f-8b6b-ed25b8af8da5','7154b2f7-a9c1-4c41-a3f1-eef79034cbbf','0563622e-1d35-46e9-ba3d-c23d018a357c','6b066bef-a2eb-40ba-9a86-97d08e76b079','de69f941-8906-42e9-8fea-4b3cc3edce94','90bf8dde-1c45-4ae2-badc-c78aeec0d5ca','119bb871-6d5c-4b6f-b4a9-eca90409a079','28994536-4f32-4221-aa6c-653b401934ea','2a4b511d-fac2-4249-a359-3a753b02c453','08d10d2a-4dfa-4819-a716-4d64422a62a6','ed85ba7c-72fb-42a4-af23-67022f2d5bab','ddb593c3-fe1e-4d2b-86bb-10c5315f46d2','895e13f2-064c-425d-afdd-8928887543de')[0m

2025/10/30 17:21:13 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:472 [33mSLOW SQL >= 200ms
[0m[31;1m[2987.315ms] [33m[rows:21][35m SELECT "complaints"."id","complaints"."title","complaints"."user_id","complaints"."student_identifier","complaints"."type","complaints"."description","complaints"."priority","complaints"."status","complaints"."created_at" FROM "complaints" JOIN student_models ON student_models.user_id = complaints.user_id WHERE student_models.hostel = 'Block-X' ORDER BY created_at desc[0m

2025/10/30 17:21:14 [32m/Users/aditisaxena/mental-health-be/middlewares/auth.go:54 [33mSLOW SQL >= 200ms
[0m[31;1m[300.467ms] [33m[rows:1][35m SELECT * FROM "users" WHERE id = '83d0439e-3228-4838-a0ea-e91b4b874319' ORDER BY "users"."id" LIMIT 1[0m

2025/10/30 17:21:14 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:315 [33mSLOW SQL >= 200ms
[0m[31;1m[291.070ms] [33m[rows:1][35m SELECT * FROM "attachments" WHERE "attachments"."complaint_id" = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a'[0m

2025/10/30 17:21:15 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:315 [33mSLOW SQL >= 200ms
[0m[31;1m[315.248ms] [33m[rows:1][35m SELECT * FROM "student_models" WHERE "student_models"."user_id" = '270a1e6e-e898-4b2e-93b0-5e39d3f5a46f'[0m

2025/10/30 17:21:15 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:315 [33mSLOW SQL >= 200ms
[0m[31;1m[324.763ms] [33m[rows:0][35m SELECT * FROM "timeline_entries" WHERE "timeline_entries"."complaint_id" = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a'[0m

2025/10/30 17:21:15 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:315 [33mSLOW SQL >= 200ms
[0m[31;1m[1259.837ms] [33m[rows:1][35m SELECT * FROM "complaints" WHERE id = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a' ORDER BY "complaints"."id" LIMIT 1[0m

2025/10/30 17:21:15 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:328 [33mSLOW SQL >= 200ms
[0m[31;1m[343.182ms] [33m[rows:1][35m SELECT * FROM "users" WHERE id = '83d0439e-3228-4838-a0ea-e91b4b874319' ORDER BY "users"."id" LIMIT 1[0m

2025/10/30 17:21:16 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:340 [33mSLOW SQL >= 200ms
[0m[31;1m[526.395ms] [33m[rows:1][35m DELETE FROM "attachments" WHERE complaint_id = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a'[0m

2025/10/30 17:21:17 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:344 [33mSLOW SQL >= 200ms
[0m[31;1m[522.447ms] [33m[rows:0][35m DELETE FROM "timeline_entries" WHERE complaint_id = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a'[0m

2025/10/30 17:21:17 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:350 [33mSLOW SQL >= 200ms
[0m[31;1m[549.636ms] [33m[rows:0][35m DELETE FROM "notifications" WHERE related_id = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a' AND related_type = 'complaint'[0m

2025/10/30 17:21:18 [32m/Users/aditisaxena/mental-health-be/controllers/complaint.go:356 [33mSLOW SQL >= 200ms
[0m[31;1m[319.911ms] [33m[rows:1][35m DELETE FROM "complaints" WHERE id = 'e7a657aa-a97b-450d-a1eb-f0ce3e80a36a'[0m
